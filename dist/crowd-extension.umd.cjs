(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.id="crowd-app-io-75.56455463003317",t.appendChild(document.createTextNode(".crowd-prompt{position:fixed}.crowd-prompt iframe{z-index:1100;background-color:transparent!important;background:transparent!important;border:none}.crowd-prompt .prompt-body-frame{width:470px;background:transparent;position:fixed;box-shadow:#00000029 0 5px 5px;-webkit-box-shadow:rgba(0,0,0,.16) 0px 5px 5px;-moz-box-shadow:rgba(0,0,0,.16) 0px 5px 6px;border-radius:10px}@media (max-width: 600px){.crowd-prompt .prompt-body-frame{width:100%!important}}.prompt-body-frame.prompt-panel-bottom-right{position:fixed;right:10px;bottom:10px}.prompt-body-frame.prompt-panel-bottom-left{position:fixed;left:10px;bottom:10px}.prompt-body-frame.prompt-panel-middle-left{position:fixed;left:-2px;top:50%;transform:translate(-50%) rotate(-90deg);transform-origin:50% 0%}.prompt-body-frame.prompt-panel-middle-right{position:fixed;top:50%;right:0;transform:rotate(-90deg) translate(50%,-50%);transform-origin:100% 50%}@media (max-width: 600px){.prompt-body-frame.prompt-panel-bottom-right{right:0;bottom:0}.prompt-body-frame.prompt-panel-bottom-left{left:0;bottom:0}.prompt-body-frame.prompt-panel-middle-left{left:0;transform:translateY(0);top:auto!important;bottom:0}.prompt-body-frame.prompt-panel-middle-right{right:0;transform:translateY(0);top:auto!important;bottom:0}}")),document.head.appendChild(t)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
(function(r){typeof define=="function"&&define.amd?define(r):r()})(function(){"use strict";var v=Object.defineProperty;var S=(r,i,d)=>i in r?v(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d;var m=(r,i,d)=>(S(r,typeof i!="symbol"?i+"":i,d),d);const r="",i=t=>`${t}-${new Date().getTime()}${Math.floor(Math.random()*100)}`,d=()=>{const t=window.location.href,e=new URL(t);return{hostname:e.hostname,origin:e.origin}},T=()=>{const t=navigator.userAgent;return/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)?"Mobile":/Tablet|iPad/i.test(t)?"Tablet":"Desktop"},P=[{label:"Do not reshow",value:"0_hours"},{label:"Reshow after 24 hours",value:"24_hours"},{label:"Reshow after 3 days",value:"72_hours"},{label:"Reshow after 1 week",value:"168_hours"}];var a=(t=>(t.PromptLoaded="PROMPTLOADED",t.GetPromptSize="GETPROMPTSIZE",t.PromptResize="PROMPTRESIZE",t.LastPromptUnmoderatedId="LASTPROMPTUNMODERATEDID",t.RemovePrompt="REMOVEPROMPT",t.CheckDeviceCompatibility="CHECKDEVICECOMPATIBILITY",t.PaginateUnmoderatedTest="PAGINATEUNMODERATEDTEST",t.StoreUserTestId="STOREMODERATEDTESTID",t))(a||{});const g="crowd-ignored-unmoderated-test",u="crowd-answered-unmoderated-test",y=(t,e,o)=>{const n=new Date;n.setTime(n.getTime()+o*24*60*60*1e3);const s=`${t}=${encodeURIComponent(JSON.stringify(e))}; expires=${n.toUTCString()}; path=/`;document.cookie=s},f=t=>{const o=document.cookie.split(";");let n=null;return o.forEach(s=>{const[p,c]=s.trim().split("=");p===t&&(n=JSON.parse(decodeURIComponent(c)))}),n===null?[]:n},E=(t,e)=>{const o=`${g}-${new Date().getTime()}`,n=new Date;n.setTime(n.getTime()+e*24*60*60*1e3);const s=`${o}=${encodeURIComponent(t)}; expires=${n.toUTCString()}; path=/`;document.cookie=s},C=()=>{const t=new RegExp(`^${g}`),o=document.cookie.split(";"),n=[];for(let s of o){const[p,c]=s.split("=").map(l=>l.trim());t.test(p)&&n.push(c)}return n},w=t=>{const e=P.findIndex(o=>o.value===t);if(e!==1){const n=P[e].value.split("_")[0];return Number(n)===0?180:Number(n)/24}else return 180},D=(t,e)=>{const o=window.location.href.replace(/\/$/,"");return console.log(o),t==="start_with"?o.startsWith(e):t==="end_with"?o.endsWith(e):t==="contains"?o.includes(e):t==="exactly_matches"?o===e:t==="is_not"?o!==e:t==="matches_regex"?new RegExp(e,"i").test(o):!1},R=t=>{const e=T();return e==="Mobile"&&t.mobile||e==="Desktop"&&t.desktop||e==="Tablet"&&t.tablet},b=async t=>{if(t.visibilityOption==="ALLPAGES")return{position:t.promptPosition};if(t.visibilityOption==="SPECIFICPAGES"){const e=t.targetPages.filter(o=>D(o.optionName,o.optionValue));return console.log(e),R(t.deviceSupported)&&e.length>0?{position:t.promptPosition}:!1}else return!1},h="http://localhost:2222",k="http://localhost:2222/crowd-extension/unmoderated-test",U=()=>{if(window.CrowdApp&&window.CrowdApp.crowd_token){const t=window.CrowdApp.crowd_token;new M(t,"prompt").setupWidgetContainer()}else console.error("Crowd App installation failed. Please ensure that you are using the correct code snippet")};class M{constructor(e,o){m(this,"integrationToken","");m(this,"elementIdPrefix","");m(this,"deviceIncompatiblePrompt",[]);m(this,"currentlyDisplayedUnmoderatedTest",null);m(this,"promptPanelFrameId",i(`${this.elementIdPrefix}-body`));m(this,"promptParentContainer",null);this.integrationToken=e,this.elementIdPrefix=o}getPromptElementsReference(){return{panelIframe:document.getElementById(this.promptPanelFrameId)}}getwidgetFrameEndpoint(){return{panelEndpoint:`${k}?token=${this.integrationToken}&domain=${d().hostname}&origin=${d().origin}`}}setupWidgetContainer(){this.promptParentContainer=document.createElement("div"),this.promptParentContainer.classList.add("crowd-prompt"),this.setupPromptPanelElement(),document.body.appendChild(this.promptParentContainer),window.addEventListener("message",this.handlePostMessageEvent.bind(this)),this.assignPromptPanelEndpoints()}handlePostMessageEvent(e){e.origin===h&&this.listenAndExecutePostMessageInteration(e)}setupPromptPanelElement(){const e=`<iframe id="${this.promptPanelFrameId}" frameborder="0" class="prompt-body-frame" allowtransparency="true" style="height: 0;"></iframe>`;this.promptParentContainer.innerHTML+=e}assignPromptPanelEndpoints(){const e=this.getPromptElementsReference();e.panelIframe&&e.panelIframe.contentWindow&&(e.panelIframe.contentWindow.location.href=this.getwidgetFrameEndpoint().panelEndpoint)}adjustPromptPanelPositionDimension(e,o){const n=this.getPromptElementsReference();e==="Position"?n.panelIframe.classList.add(`prompt-panel-${o.position.toLowerCase().split("_").join("-")}`):e==="Resize"&&(n.panelIframe.style.height=`${o.height}px`,n.panelIframe.style.width=`${o.width}px`)}sendDisplayedUnmoderatedTestIds(e){var n;const o={eventType:a.LastPromptUnmoderatedId,payload:{ignoredTestIds:C(),answeredTestIds:f(u),incompatibleTestIds:this.deviceIncompatiblePrompt}};(n=e.contentWindow)==null||n.postMessage(o,h)}sendPaginationEventRequest(e){var n;const o={eventType:a.PaginateUnmoderatedTest,payload:{}};(n=e.contentWindow)==null||n.postMessage(o,h)}listenAndExecutePostMessageInteration(e){var n,s,p,c;const o=this.getPromptElementsReference();switch(e.data.eventType){case a.PromptLoaded:{e.data.payload.showPrompt?this.sendDisplayedUnmoderatedTestIds(o.panelIframe):this.clearPromptOnDeactivation();break}case a.CheckDeviceCompatibility:{b(e.data.payload).then(l=>{var I;if(l){this.currentlyDisplayedUnmoderatedTest=e.data.payload,this.adjustPromptPanelPositionDimension("Position",l);const A={eventType:a.GetPromptSize,payload:{}};(I=o.panelIframe.contentWindow)==null||I.postMessage(A,h)}else this.deviceIncompatiblePrompt.push(e.data.payload.id),this.sendPaginationEventRequest(o.panelIframe)});break}case a.PromptResize:{this.adjustPromptPanelPositionDimension("Resize",e.data.payload);break}case a.RemovePrompt:{this.clearPromptOnDeactivation();break}case a.StoreUserTestId:if(e.data.payload.onCloseAction==="ANSWER"){const l=f(u);((n=this.currentlyDisplayedUnmoderatedTest)==null?void 0:n.id)!==void 0&&(l.push((s=this.currentlyDisplayedUnmoderatedTest)==null?void 0:s.id),y(u,l,30),this.sendPaginationEventRequest(o.panelIframe))}else e.data.payload.onCloseAction==="IGNORE"&&((p=this.currentlyDisplayedUnmoderatedTest)==null?void 0:p.id)!==void 0&&(console.log(w(this.currentlyDisplayedUnmoderatedTest.reshowPrompt)),E((c=this.currentlyDisplayedUnmoderatedTest)==null?void 0:c.id,w(this.currentlyDisplayedUnmoderatedTest.reshowPrompt)),this.sendPaginationEventRequest(o.panelIframe))}}clearPromptOnDeactivation(){this.promptParentContainer&&this.promptParentContainer.remove()}}U()});
